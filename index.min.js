(function(){"use strict";console.log("哔哩哔哩用户成分鉴定启动"),console.log("源码仓库：https://github.com/YlAwen/Bilibili-UserIdentification");let e=[];const t="https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/space?&host_mid=",s="http://my-json-server.typicode.com/YlAwen/Bilibili-UserIdentification/data",n=0!==document.getElementsByClassName("item goback").length,a={tag:"span",style:{display:"inline-block","font-size":"14px",background:"linear-gradient(to bottom right,#8A2BE2,#DC143C)",padding:" 0px 4px","border-radius":"4px",color:"#fff","margin-left":"6px"}},i=(e,t)=>{GM_xmlhttpRequest({method:"get",url:e,data:"",headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.102 Safari/537.36 Safari/537.36 Edg/104.0.1293.70"},onload:e=>{200===e.status&&t(JSON.parse(e.response))}})},l=()=>{i(s,t=>{e=t})};l();const o=e=>n?e.dataset.userId:e.children[0].href.replace(/[^\d]/g,""),r=e=>document.getElementsByClassName(e),c=e=>0!==e.length,d=e=>{let t="";for(const s in e)t=t+s+":"+e[s]+";";return"style='"+t+"'"},g=(t,s)=>{if(c(e)){let n=[];if(e.forEach(e=>{e.keywords.forEach(t=>{s.includes(t)&&n.push(`<${a.tag} class="Awen-tag" ${d(a.style)}>${e.tag}</${a.tag}>`)})}),0===n.length)return t.innerHTML+="<span class='Awen-tag'></span>";n.forEach(e=>t.innerHTML+=e)}else l()};setInterval(()=>{if(n){const e=[...r("user-name"),...r("sub-user-name")];c(e)&&e.forEach(e=>{let s=!1;if(e.childNodes.forEach(e=>{if("Awen-tag"===e.className)return s=!0}),!s){const s=t+o(e);i(s,t=>{g(e,JSON.stringify(t))})}})}},2e3)})();